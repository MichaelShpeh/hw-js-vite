import"./modulepreload-polyfill-3cfb730f.js";import{H as v}from"./handlebars-aa0ac26f.js";const S=`<li class="student-item" data-index="{{_index}}"><h2 class="student-title">Студент №{{addOne _index}}</h2><div class="student-text"><p>Ім'я:&nbsp;{{name}}</p><p>Прізвище:&nbsp;{{second-name}}</p><p>Вік:&nbsp;{{age}}</p><p>Курс:&nbsp;{{course}}</p><p>Факультет:&nbsp;{{faculty}}</p></div><div class="student-actions"><button class="edit-btn" data-index="{{_index}}">Edit</button><button class="delete-btn" data-index="{{_index}}">Delete</button></div></li>`,L=[{id:1,firstName:"Ім'я-1",lastName:"Прізвище-1",age:11,course:"Курс-1",faculty:"Факультет-1"},{id:2,firstName:"Ім'я-2",lastName:"Прізвище-2",age:12,course:"Курс-2",faculty:"Факультет-2"},{id:3,firstName:"Ім'я-3",lastName:"Прізвище-3",age:13,course:"Курс-3",faculty:"Факультет-3"},{id:4,firstName:"Ім'я-4",lastName:"Прізвище-4",age:14,course:"Курс-4",faculty:"Факультет-4"},{id:5,firstName:"Ім'я-5",lastName:"Прізвище-5",age:15,course:"Курс-5",faculty:"Факультет-5"}];//! імпортування бібліотеки HandeBars
v.registerHelper("addOne",function(t){return t+1});const N=v.compile(S);//! знаходимо всі елементи з розмітки
const y=document.querySelector(".backdrop"),h=document.querySelector(".confirm-button"),E=document.querySelector(".delete-button"),m=document.getElementById("student-info-form"),i=document.getElementById("students-list"),x=document.querySelector(".buttonOpn"),b=document.querySelector(".backdrop-1"),k=document.querySelector(".formCloseBtn"),p=document.querySelector(".backdrop-edit"),s=document.getElementById("edit-student-form");document.querySelector(".cancel-edit-modal");x.addEventListener("click",function(){b.classList.remove("is-hidden")});k.addEventListener("click",function(){b.classList.add("is-hidden")});console.log("studentsFromJSON:",L);let a=[],f=localStorage.getItem("students");console.log("datalocalStorage:",typeof f);f===null||f==="[]"?(a=L,o(a),c(),console.log("YA PIDORAS")):(a=JSON.parse(f),o(a),c());//! додаємо студента
m.addEventListener("submit",function(t){t.preventDefault();try{const e=new FormData(m),n=Object.fromEntries(e.entries());a.push(n),c(),o(a),m.reset(),b.classList.add("is-hidden")}catch(e){console.error(e)}});//! функція яка додає студента в список
function o(t){i.innerHTML='<li class="item">Список студентів:</li>',t.forEach((e,n)=>{e._index=n;try{const r=N(e);i.insertAdjacentHTML("beforeend",r)}catch(r){console.error(r)}})}//! оновлюємо localstorage
function c(){try{const t=JSON.stringify(a);localStorage.setItem("students",t)}catch(t){console.error("Помилка JSON.stringify:",t)}}//! відкриття модалки
let l=null;i.addEventListener("click",function(t){if(t.target.classList.contains("delete-btn")){const e=parseInt(t.target.dataset.index,10);if(isNaN(e))return;l=e,y.classList.remove("is-hidden")}});//! підтвердити видалення
h.addEventListener("click",()=>{l!==null&&(a.splice(l,1),c(),o(a),l=null),y.classList.add("is-hidden")});//! скасувати видалення
E.addEventListener("click",()=>{l=null,y.classList.add("is-hidden")});//! редагування студента
let d=null;i.addEventListener("click",t=>{if(t.target.classList.contains("edit-btn")){const e=parseInt(t.target.dataset.index,10);if(isNaN(e)||!a[e])return;const n=a[e];d=e,s.elements.name.value=n.name,s.elements["second-name"].value=n["second-name"],s.elements.age.value=n.age,s.elements.course.value=n.course,s.elements.faculty.value=n.facult,s.addEventListener("submit",r=>{r.preventDefault();try{const g=new FormData(s),u=Object.fromEntries(g.entries());u.age=Number(u.age),console.log("updatedStudent:",u),a[d]=u,c(),o(a)}catch(g){console.error(g)}finally{s.reset(),p.classList.add("is-hidden"),d=null}}),s.querySelector(".cancel-edit-modal").addEventListener("click",()=>{m.id="student-info-form",p.classList.add("is-hidden")})}});i.addEventListener("click",t=>{if(t.target.classList.contains("edit-btn")){const e=parseInt(t.target.dataset.index,10);if(isNaN(e)||!a[e])return;const n=a[e];d=e,s.elements.name.value=n.name,s.elements["second-name"].value=n["second-name"],s.elements.age.value=n.age,s.elements.course.value=n.course,s.elements.faculty.value=n.faculty,p.classList.remove("is-hidden")}});//! підтвердження змінення
s.addEventListener("submit",t=>{t.preventDefault();try{const e=new FormData(s),n=Object.fromEntries(e.entries());a[d]=n,c(),o(a)}catch(e){console.error(e)}finally{s.reset(),p.classList.add("is-hidden"),d=null}});
