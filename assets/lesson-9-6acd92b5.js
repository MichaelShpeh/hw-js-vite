import"./modulepreload-polyfill-3cfb730f.js";import{H as y}from"./handlebars-aa0ac26f.js";const N=`<li class="student-item" data-index="{{_index}}"><h2 class="student-title">Студент №{{addOne _index}}</h2><div class="student-text"><p>Ім'я:&nbsp;{{firstName}}</p><p>Прізвище:&nbsp;{{lastName}}</p><p>Вік:&nbsp;{{age}}</p><p>Курс:&nbsp;{{course}}</p><p>Факультет:&nbsp;{{faculty}}</p></div><div class="student-actions"><button class="edit-btn" data-index="{{_index}}">Edit</button><button class="delete-btn" data-index="{{_index}}">Delete</button></div></li>`,b=[{id:1,firstName:"Ім'я-1",lastName:"Прізвище-1",age:11,course:"Курс-1",faculty:"Факультет-1"},{id:2,firstName:"Ім'я-2",lastName:"Прізвище-2",age:12,course:"Курс-2",faculty:"Факультет-2"},{id:3,firstName:"Ім'я-3",lastName:"Прізвище-3",age:13,course:"Курс-3",faculty:"Факультет-3"},{id:4,firstName:"Ім'я-4",lastName:"Прізвище-4",age:14,course:"Курс-4",faculty:"Факультет-4"},{id:5,firstName:"Ім'я-5",lastName:"Прізвище-5",age:15,course:"Курс-5",faculty:"Факультет-5"}];//! імпортування бібліотеки HandeBars
y.registerHelper("addOne",function(t){return t+1});const L=y.compile(N);//! знаходимо всі елементи з розмітки
const f=document.querySelector(".backdrop"),v=document.querySelector(".confirm-button"),S=document.querySelector(".delete-button"),m=document.getElementById("student-info-form"),i=document.getElementById("students-list"),h=document.querySelector(".buttonOpn"),p=document.querySelector(".backdrop-1"),E=document.querySelector(".formCloseBtn"),g=document.querySelector(".backdrop-edit"),a=document.getElementById("edit-student-form");document.querySelector(".cancel-edit-modal");h.addEventListener("click",function(){p.classList.remove("is-hidden")});E.addEventListener("click",function(){p.classList.add("is-hidden")});console.log("studentsFromJSON:",b);let s=[],l=localStorage.getItem("students");console.log("datalocalStorage:",typeof l);l===null||l==="[]"?(s=b,c(s),r(),console.log("YA PIDORAS")):(s=JSON.parse(l),c(s),r());//! додаємо студента
m.addEventListener("submit",function(t){t.preventDefault();try{const e=new FormData(m),n=Object.fromEntries(e.entries());s.push(n),r(),c(s),m.reset(),p.classList.add("is-hidden")}catch(e){console.error(e)}});//! функція яка додає студента в список
function c(t){i.innerHTML='<li class="item">Список студентів:</li>',t.forEach((e,n)=>{e._index=n;try{const u=L(e);i.insertAdjacentHTML("beforeend",u)}catch(u){console.error(u)}})}//! оновлюємо localstorage
function r(){try{const t=JSON.stringify(s);localStorage.setItem("students",t)}catch(t){console.error("Помилка JSON.stringify:",t)}}//! відкриття модалки
let d=null;i.addEventListener("click",function(t){if(t.target.classList.contains("delete-btn")){const e=parseInt(t.target.dataset.index,10);if(isNaN(e))return;d=e,f.classList.remove("is-hidden")}});//! підтвердити видалення
v.addEventListener("click",()=>{d!==null&&(s.splice(d,1),r(),c(s),d=null),f.classList.add("is-hidden")});//! скасувати видалення
S.addEventListener("click",()=>{d=null,f.classList.add("is-hidden")});//! редагування студента
let o=null;i.addEventListener("click",t=>{if(t.target.classList.contains("edit-btn")){const e=parseInt(t.target.dataset.index,10);if(isNaN(e)||!s[e])return;const n=s[e];o=e,a.elements.firstName.value=n.firstName,a.elements.lastName.value=n.lastName,a.elements.age.value=n.age,a.elements.course.value=n.course,a.elements.faculty.value=n.faculty,g.classList.remove("is-hidden")}});a.addEventListener("submit",t=>{t.preventDefault();try{const e=new FormData(a),n=Object.fromEntries(e.entries());n.age=Number(n.age),console.log("updatedStudent:",n),o!==null&&(s[o]=n,r(),c(s))}catch(e){console.error(e)}finally{a.reset(),g.classList.add("is-hidden"),o=null}});a.querySelector(".cancel-edit-modal").addEventListener("click",()=>{a.reset(),g.classList.add("is-hidden"),o=null});
